<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<link rel="import" href="../../bower_components/polymerfire/firebase-app.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-document.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">

<dom-module id="tm-questionnaire">
  <template>
    <style>
      :host {
        display: block;
      }
      .page {
        display:inline-block;
        box-sizing:border-box;
        height:100%;
        width:100%;
        padding:10px;
      }
      .item {
        display:inline-block;
        width:50%;
        margin:0;
        padding:10px;
        float:left;
        box-sizing:border-box;
      }
    </style>

    <firebase-app
      name="questionnaire-f54f6-aaa"
      api-key="AIzaSyCFp-qmqmnzZr_XRNVW3GnkTyk18ZlwW0s"
      auth-domain="questionnaire-f54f6.firebaseapp.com"
      database-url="https://questionnaire-f54f6.firebaseio.com">
    </firebase-app>

    <firebase-auth
      id="aaa"
      app-name="questionnaire-f54f6-aaa"
      user="{{user}}"
      signed-in="{{signedIn}}"
      provider="google"></firebase-auth>

    <firebase-query
      id="pressiontationsMain"
      app-name="let-me-know-stuff-9a516"
      path="/tm-presentation/presentations"
      data="{{presentations}}">
    </firebase-query>

    <paper-drawer-panel id="drawer" force-narrow>
      <paper-header-panel drawer>
        <paper-toolbar>
          <div class="title">Menu</div>
        </paper-toolbar>
        <paper-menu id="menu" selected="{{selected}}">
          <paper-item>Item 1</paper-item>
          <paper-item>Item 2</paper-item>
        </paper-menu>
      </paper-header-panel>

      <paper-scroll-header-panel main>

        <paper-toolbar>
          <paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
          <div class="flex title">Questionnaire</div>
          <paper-icon-button icon="search"></paper-icon-button>
          <paper-icon-button icon="more-vert"></paper-icon-button>
        </paper-toolbar>

        <iron-pages class="content" selected="{{selected}}">
          <div class="page">
            <h2>Hello [[_getFirstName(user)]]</h2>
            <paper-input label="Name" value="{{name}}"></paper-input>
            <paper-input label="Signed In" diabled value="{{signedIn}}"></paper-input>
            <paper-input label="Email" disabled value="{{user.email}}"></paper-input>
          </div>
          <div class="page">
            <div class="item"><paper-input label="One" value="AAA"></paper-input></div>
            <div class="item"><paper-input label="Two" value="BBB"></paper-input></div>
          </div>
          <div class="page">
            <h2>Hello [[name]]</h2>
            <paper-input label="Name" value="{{name}}"></paper-input>
            <paper-card>Other Stuff</paper-card>
          </div>
        </iron-pages>


      </paper-scroll-header-panel>

    </paper-drawer-panel>

  </template>

  <script>
    Polymer({

      is: 'tm-questionnaire',

      properties: {
        signedIn : {
          type: Boolean,
          notify:true,
          value: false
        },
        user : {
          type:Object,
          notify:true
        },
        name: {
          type: String,
          value: 'Jayne',
          notify: true
        },
        selected: {
          type: Number,
          value: 0,
          notify: true
        }
      },
      observers: [
        'debug(user)'
      ],
      listeners: {
        'menu.iron-select': 'menuSelected'
      },
      debug: function(object) {
        console.log({m:'user', o:object});
      },
      _getFirstName: function(user) {
        return (user === null ? "" : user.displayName.split(' ')[0]);
      },
      menuSelected: function() {
        console.log('sadfsadfsdaf');
        this.$.drawer.closeDrawer();
      },
      ready: function() {
        // this.$.aaa.signInWithEmailAndPassword('tim@mcmaster.id.au', 'asdfgh');
        // this.$.aaa.signInWithPopup();
      }
    });
  </script>
</dom-module>
